<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for index.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="prettify.css" />
    <link rel="stylesheet" href="base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="index.html">All files</a> index.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">37.08% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>33/89</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">29.09% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>16/55</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">38.24% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>13/34</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>1/1</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2</td><td class="line-coverage quiet"><span class="cline-any cline-yes">10x</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var TOPTEN_HOST_ADDRESS="https://mister-trainer.herokuapp.com",MRTRAINER_HOST_ADDRESS="https://mister-trainer.herokuapp.com",classCallCheck=function(e,t){<span class="missing-if-branch" title="if path not taken" >I</span>if(!(e instanceof t))<span class="cstat-no" title="statement not covered" >throw new TypeError("Cannot call a class as a function")}</span>,createClass=function(){function e(e,t){for(var n=0;n&lt;t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&amp;&amp;(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&amp;&amp;e(t.prototype,n),r&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >e(t,r),</span>t}}(),axios=require("axios"),KnowledgeProvider=function(){function e(){classCallCheck(this,e),console.log("Hello Knowledge Provider"),this.mrtrainer_host_address=MRTRAINER_HOST_ADDRESS,this.prefixList=["tell me about","who is","what is"],this.topten_host_address=TOPTEN_HOST_ADDRESS,this.qa_logger_url=this.topten_host_address+"/api/v1/definitions/add"}return createClass(e,[{key:"findAnswer",value:function(e){<span class="missing-if-branch" title="if path not taken" >I</span>if(!this._hasValidPrefix(this.prefixList,e)){<span class="cstat-no" title="statement not covered" >return Promise.resolve({ok:!1,question:e,response:'Questions must start with "who is" or "what is", please try again!'})}</span>var t=this._removePrefix(this.prefixList,e),n=this.mrtrainer_host_address+"/tell-me-about/api/v1/definition?text="+t;return this._makeHttpGetRequest(n).then(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return console.log("knowledge - findAnswer --\x3e",e),{ok:e.ok,question:e.question,response:e.response}}</span>).catch(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return{ok:!1,question:e,response:t.message||"failed"}}</span>)}},{key:"_hasValidPrefix",value:function(e){var t=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:<span class="branch-1 cbranch-no" title="branch not covered" >"";</span>return e.some(function(e){return 0===t.trim().toLowerCase().search(e)})}},{key:"_removePrefix",value:function(e){var t=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:<span class="branch-1 cbranch-no" title="branch not covered" >"",</span>n=e.find(function(e){return 0===t.trim().toLowerCase().search(e)});return t.trim().toLowerCase().replace(n||<span class="branch-1 cbranch-no" title="branch not covered" >"",</span>"").replace("?","").trim()}},{key:"_makeHttpGetRequest",value:function(e){return axios.get(e).then(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return console.log("http res",e.data),e.data}</span>).catch(this.handleError)}},{key:"_makeHttpPostRequest",value:<span class="fstat-no" title="function not covered" >fu</span>nction(e,t){<span class="cstat-no" title="statement not covered" >return axios.post(e,t).then(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return console.log("http res",e.data),e.data}</span>).catch(this.handleError)}</span>},{key:"handleError",value:<span class="fstat-no" title="function not covered" >fu</span>nction(e){var t=<span class="cstat-no" title="statement not covered" >e.message?e.message:e.status?e.status+" - "+e.statusText:"Unkown error, maybe you are offline!";<span class="cstat-no" title="statement not covered" ></span>return console.log("error ----\x3e",e,t),Promise.reject({ok:!1,message:t})}</span>},{key:"logQAResult",value:<span class="fstat-no" title="function not covered" >fu</span>nction(e,t){var n=<span class="cstat-no" title="statement not covered" >void 0,</span>r=<span class="cstat-no" title="statement not covered" >void 0;<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >n=JSON.stringify(window.navigator.userAgent)}</span>catch(e){}<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >r=Math.random().toString().replace("0.",""),console.log("topten-hash",r)}</span>catch(e){}v</span>ar o=<span class="cstat-no" title="statement not covered" >this.topten_host_address+"/api/v1/ask-question?q="+e,</span>s=<span class="cstat-no" title="statement not covered" >{question:e,answer:t,origin:{deviceId:n,appHash:r},meta:{url:o}};<span class="cstat-no" title="statement not covered" ></span>return this._makeHttpPostRequest(this.qa_logger_url,s).then(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return console.log("knowledge - logQAResult --\x3e",e),e}</span>).catch(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return{ok:!1,question:e,answer:t.message||"failed"}}</span>)}</span>},{key:"findDailyQuestion",value:<span class="fstat-no" title="function not covered" >fu</span>nction(e,t){var n=<span class="cstat-no" title="statement not covered" >encodeURIComponent(e+". "+t),</span>r=<span class="cstat-no" title="statement not covered" >this.mrtrainer_host_address+"/top-ten/api/v1/text-analysis?text="+n,</span>o=<span class="cstat-no" title="statement not covered" >this;<span class="cstat-no" title="statement not covered" ></span>return axios.get(r).then(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >console.log("[HeadlinePage] findRealSource",e.headers,e.data);v</span>ar t=<span class="cstat-no" title="statement not covered" >e.data;<span class="cstat-no" title="statement not covered" ></span>if(t.length&amp;&amp;t.length&gt;0){var n=<span class="cstat-no" title="statement not covered" >(t=t.filter(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return!!e.url}</span>)).filter(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return"PERSON"===e.type}</span>),</span>r=<span class="cstat-no" title="statement not covered" >t.filter(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return"LOCATION"===e.type}</span>),</span>s=<span class="cstat-no" title="statement not covered" >t.filter(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return"WORK_OF_ART"===e.type}</span>),</span>i=<span class="cstat-no" title="statement not covered" >t.filter(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return"EVENT"===e.type}</span>),</span>a=<span class="cstat-no" title="statement not covered" >t.filter(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return"ORGANIZATION"===e.type}</span>);<span class="cstat-no" title="statement not covered" ></span>t={people:n=n.length?n:null,arts:s=s.length?s:null,events:i=i.length?i:null,locations:r=r.length?r:null,organizations:a=a.length?a:null}}</span>v</span>ar l=<span class="cstat-no" title="statement not covered" >t.people||t.arts||t.events||t.locations||[];<span class="cstat-no" title="statement not covered" ></span>console.log("selectedEntities",t.people,t.arts,t.events,t.locations);v</span>ar u=<span class="cstat-no" title="statement not covered" >void 0,</span>c=<span class="cstat-no" title="statement not covered" >void 0;<span class="cstat-no" title="statement not covered" ></span>if(l.length&amp;&amp;l.length&gt;0){<span class="cstat-no" title="statement not covered" >o._shuffle(l);v</span>ar h=<span class="cstat-no" title="statement not covered" >l[0];<span class="cstat-no" title="statement not covered" ></span>u=("PERSON"===h.type?"Who is":"What is")+" "+h.value+"?",c=h.url}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{value:u,source:c,timeNow:new Date}}</span>)}</span>},{key:"_shuffle",value:<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >for(var t=e.length,n=0;n&lt;e.length;n++){var r=<span class="cstat-no" title="statement not covered" >this._getRandomInt(n,t),</span>o=<span class="cstat-no" title="statement not covered" >e[n];<span class="cstat-no" title="statement not covered" ></span>e[n]=e[r],e[r]=o}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn e}</span>},{key:"_getRandomInt",value:<span class="fstat-no" title="function not covered" >fu</span>nction(e,t){<span class="cstat-no" title="statement not covered" >return Math.floor(Math.random()*(t-e))+e}</span>}]),e}(),knowledgeProvider=new KnowledgeProvider,handler=function(e,t){console.log("START event"),console.log(e.inputTranscript),console.log("END event"),console.log("START context"),console.log(t),console.log("END context");var n={dialogAction:{type:"Close",fulfillmentState:"Fulfilled",message:{contentType:"PlainText",content:"I currently do not know that :("}}};return knowledgeProvider.findAnswer(e.inputTranscript).then(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >n.dialogAction.message.content=e.response,t.succeed(n)}</span>).catch(<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return t.succeed(n)}</span>)};exports.handler=handler;
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Thu Jun 22 2017 23:20:50 GMT-0400 (EDT)
</div>
</div>
<script src="prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="sorter.js"></script>
</body>
</html>
